{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/priyanshkakkad/Downloads/investment-platform-design/app/admin/users/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\n\ninterface User {\n  _id: string\n  name: string\n  email: string\n  role: \"admin\" | \"business_owner\" | \"investor\"\n  isActive: boolean\n  createdAt: string\n}\n\nexport default function AdminUsersPage() {\n  const router = useRouter()\n  const [users, setUsers] = useState<User[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showForm, setShowForm] = useState(false)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"investor\" as const,\n  })\n  const [mounted, setMounted] = useState(false)\n  const [creating, setCreating] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [deletingId, setDeletingId] = useState<string | null>(null)\n\n  useEffect(() => {\n    fetchUsers()\n    setMounted(true)\n  }, [])\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"/api/admin/users\")\n      if (response.ok) {\n        const data = await response.json()\n        setUsers(data.data || [])\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch users:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setCreating(true)\n\n    try {\n      const response = await fetch(\"/api/admin/users\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      })\n\n      if (response.ok) {\n        setFormData({ name: \"\", email: \"\", password: \"\", role: \"investor\" })\n        setShowForm(false)\n        fetchUsers()\n      } else {\n        const data = await response.json()\n        setError(data.error || \"Failed to create user\")\n      }\n    } catch (err) {\n      setError(\"An error occurred\")\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    setError(\"\")\n    const ok = window.confirm(\"Delete this user?\")\n    if (!ok) return\n    setDeletingId(id)\n    try {\n      const res = await fetch(`/api/admin/users/${id}`, { method: \"DELETE\" })\n      if (res.ok) {\n        setUsers((prev) => prev.filter((u) => u._id !== id))\n      } else {\n        const data = await res.json()\n        setError(data.error || \"Failed to delete user\")\n      }\n    } catch {\n      setError(\"An error occurred\")\n    } finally {\n      setDeletingId(null)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-card border-b border-border sticky top-0 z-50 backdrop-blur-sm bg-card/95\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <Link href=\"/admin/dashboard\" className=\"text-primary hover:text-primary/80 text-sm mb-2 inline-flex items-center gap-1\">\n            ‚Üê Back\n          </Link>\n          <div className=\"flex justify-between items-center mt-2\">\n            <h1 className=\"text-2xl font-bold text-foreground\">Users</h1>\n            <button\n              onClick={() => setShowForm(!showForm)}\n              className=\"bg-primary hover:bg-primary/90 text-primary-foreground font-medium py-2 px-4 rounded-lg shadow-lg shadow-primary/20 transition-all\"\n            >\n              {showForm ? \"Cancel\" : \"Create User\"}\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\n        {showForm && (\n          <div className=\"bg-card border border-border rounded-xl p-6 mb-8\">\n            <h2 className=\"text-lg font-semibold text-foreground mb-4\">Create New User</h2>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                    autoFocus={mounted}\n                    autoComplete=\"off\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                    autoComplete=\"off\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Password</label>\n                  <input\n                    type=\"password\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                    autoComplete=\"new-password\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Role</label>\n                  <select\n                    value={formData.role}\n                    onChange={(e) => setFormData({ ...formData, role: e.target.value as any })}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground\"\n                  >\n                    <option value=\"admin\">Admin</option>\n                    <option value=\"business_owner\">Business Owner</option>\n                    <option value=\"investor\">Investor</option>\n                  </select>\n                </div>\n              </div>\n              {error && (\n                <div className=\"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm\">{error}</div>\n              )}\n              <button\n                type=\"submit\"\n                disabled={creating}\n                className=\"bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground font-medium py-2 px-4 rounded-lg shadow-lg shadow-primary/20 transition-all\"\n              >\n                {creating ? \"Creating...\" : \"Create User\"}\n              </button>\n            </form>\n          </div>\n        )}\n\n        {/* Users Table */}\n        <div className=\"bg-card border border-border rounded-xl overflow-hidden\">\n          {loading ? (\n            <div className=\"p-12 text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n            </div>\n          ) : users.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <p className=\"text-muted-foreground\">No users found</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full\">\n                <thead className=\"bg-muted/50 border-b border-border\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Name</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Email</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Role</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Status</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Created</th>\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">Actions</th>\n                </tr>\n              </thead>\n                <tbody className=\"divide-y divide-border\">\n                  {users.map((user) => (\n                    <tr key={user._id} className=\"hover:bg-accent/50 transition-colors\">\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground\">{user.name}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">{user.email}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/20 text-primary capitalize\">\n                          {user.role.replace(\"_\", \" \")}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <span\n                          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            user.isActive ? \"bg-chart-3/20 text-chart-3\" : \"bg-destructive/20 text-destructive\"\n                          }`}\n                        >\n                          {user.isActive ? \"Active\" : \"Inactive\"}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\n                        {new Date(user.createdAt).toLocaleDateString()}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right\">\n                        <button\n                          onClick={() => handleDelete(user._id)}\n                          disabled={deletingId === user._id}\n                          className=\"inline-flex items-center bg-destructive hover:bg-destructive/90 disabled:opacity-50 text-destructive-foreground font-medium py-1.5 px-3 rounded-lg transition-all\"\n                        >\n                          {deletingId === user._id ? \"Deleting...\" : \"Delete\"}\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}