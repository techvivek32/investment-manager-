{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/priyanshkakkad/Downloads/investment-platform-design/app/owner/businesses/new/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\n\nexport default function NewBusinessPage() {\n  const router = useRouter()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [locationType, setLocationType] = useState<\"text\" | \"link\" | \"coordinates\">(\"text\")\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    category: \"\",\n    location: \"\",\n    latitude: 0,\n    longitude: 0,\n    minInvestmentAmount: 0,\n    maxInvestmentAmount: 0,\n    expectedReturnPercentage: 0,\n  })\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target\n    setFormData((prev) => ({\n      ...prev,\n      [name]:\n        name.includes(\"Amount\") ||\n        name.includes(\"Percentage\") ||\n        name.includes(\"latitude\") ||\n        name.includes(\"longitude\")\n          ? Number.parseFloat(value)\n          : value,\n    }))\n  }\n\n  const extractCoordinates = (input: string) => {\n    // Google Maps patterns: @lat,lng or ?q=lat,lng or /place/name/@lat,lng\n    const patterns = [\n      /@(-?\\d+\\.\\d+),(-?\\d+\\.\\d+)/,\n      /[?&]q=(-?\\d+\\.\\d+),(-?\\d+\\.\\d+)/,\n      /ll=(-?\\d+\\.\\d+),(-?\\d+\\.\\d+)/,\n      /(-?\\d+\\.\\d+)[,\\s]+(-?\\d+\\.\\d+)/\n    ]\n    \n    for (const pattern of patterns) {\n      const match = input.match(pattern)\n      if (match) return { lat: parseFloat(match[1]), lng: parseFloat(match[2]) }\n    }\n    \n    return null\n  }\n\n  const isGoogleMapsLink = (input: string) => {\n    return input.includes('maps.google') || input.includes('maps.app.goo.gl') || input.includes('goo.gl/maps')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setLoading(true)\n\n    try {\n      let submitData = { ...formData }\n      \n      if (locationType === \"link\" || locationType === \"text\") {\n        const coords = extractCoordinates(formData.location)\n        if (coords) {\n          submitData.latitude = coords.lat\n          submitData.longitude = coords.lng\n        } else if (locationType === \"link\") {\n          if (isGoogleMapsLink(formData.location)) {\n            setError(\"Shortened Google Maps links are not supported. Please open the link, then copy the full URL from the address bar (it should contain coordinates like @40.7128,-74.0060).\")\n          } else {\n            setError(\"Invalid location link. Please use a valid Google Maps link with coordinates.\")\n          }\n          setLoading(false)\n          return\n        }\n      }\n\n      const response = await fetch(\"/api/businesses\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(submitData),\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        router.push(`/owner/businesses/${data.data._id}`)\n      } else {\n        const data = await response.json()\n        setError(data.error || \"Failed to create business\")\n      }\n    } catch (err) {\n      setError(\"An error occurred. Please try again.\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-card border-b border-border sticky top-0 z-50 backdrop-blur-sm bg-card/95\">\n        <div className=\"max-w-4xl mx-auto px-6 py-4\">\n          <Link href=\"/owner/dashboard\" className=\"text-primary hover:text-primary/80 text-sm mb-2 inline-flex items-center gap-1\">\n            ‚Üê Back\n          </Link>\n          <h1 className=\"text-2xl font-bold text-foreground mt-2\">Create New Business</h1>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-4xl mx-auto px-6 py-8\">\n        <div className=\"bg-card border border-border rounded-xl p-8\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Business Name */}\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-medium text-foreground mb-2\">\n                Business Name *\n              </label>\n              <input\n                id=\"name\"\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                placeholder=\"e.g., Tech Startup Inc.\"\n                className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-foreground mb-2\">\n                Description *\n              </label>\n              <textarea\n                id=\"description\"\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n                placeholder=\"Describe your business...\"\n                rows={4}\n                className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                required\n              />\n            </div>\n\n            {/* Category */}\n            <div>\n              <label htmlFor=\"category\" className=\"block text-sm font-medium text-foreground mb-2\">\n                Category\n              </label>\n              <input\n                id=\"category\"\n                type=\"text\"\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                placeholder=\"e.g., Technology, Real Estate, etc.\"\n                className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n              />\n            </div>\n\n            {/* Location */}\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Location *</label>\n              <div className=\"flex gap-2 mb-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setLocationType(\"text\")}\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-all ${\n                    locationType === \"text\"\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-secondary text-secondary-foreground hover:bg-secondary/80\"\n                  }`}\n                >\n                  Address/Text\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setLocationType(\"link\")}\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-all ${\n                    locationType === \"link\"\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-secondary text-secondary-foreground hover:bg-secondary/80\"\n                  }`}\n                >\n                  Google Maps Link\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setLocationType(\"coordinates\")}\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-all ${\n                    locationType === \"coordinates\"\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-secondary text-secondary-foreground hover:bg-secondary/80\"\n                  }`}\n                >\n                  Coordinates\n                </button>\n              </div>\n\n              {locationType === \"text\" && (\n                <input\n                  type=\"text\"\n                  name=\"location\"\n                  value={formData.location}\n                  onChange={handleChange}\n                  placeholder=\"e.g., 123 Main St, New York, NY 10001\"\n                  className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                  required\n                />\n              )}\n\n              {locationType === \"link\" && (\n                <input\n                  type=\"text\"\n                  name=\"location\"\n                  value={formData.location}\n                  onChange={handleChange}\n                  placeholder=\"e.g., https://maps.google.com/?q=40.7128,-74.0060\"\n                  className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                  required\n                />\n              )}\n\n              {locationType === \"coordinates\" && (\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <input\n                    type=\"number\"\n                    name=\"latitude\"\n                    value={formData.latitude}\n                    onChange={handleChange}\n                    step=\"0.0001\"\n                    placeholder=\"Latitude (e.g., 40.7128)\"\n                    className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                    required\n                  />\n                  <input\n                    type=\"number\"\n                    name=\"longitude\"\n                    value={formData.longitude}\n                    onChange={handleChange}\n                    step=\"0.0001\"\n                    placeholder=\"Longitude (e.g., -74.0060)\"\n                    className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                    required\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Investment Amounts */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label htmlFor=\"minInvestmentAmount\" className=\"block text-sm font-medium text-foreground mb-2\">\n                  Min Investment Amount *\n                </label>\n                <input\n                  id=\"minInvestmentAmount\"\n                  type=\"number\"\n                  name=\"minInvestmentAmount\"\n                  value={formData.minInvestmentAmount}\n                  onChange={handleChange}\n                  step=\"0.01\"\n                  placeholder=\"0\"\n                  className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                  required\n                />\n              </div>\n              <div>\n                <label htmlFor=\"maxInvestmentAmount\" className=\"block text-sm font-medium text-foreground mb-2\">\n                  Max Investment Amount *\n                </label>\n                <input\n                  id=\"maxInvestmentAmount\"\n                  type=\"number\"\n                  name=\"maxInvestmentAmount\"\n                  value={formData.maxInvestmentAmount}\n                  onChange={handleChange}\n                  step=\"0.01\"\n                  placeholder=\"0\"\n                  className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Expected Return */}\n            <div>\n              <label htmlFor=\"expectedReturnPercentage\" className=\"block text-sm font-medium text-foreground mb-2\">\n                Expected Return Percentage\n              </label>\n              <input\n                id=\"expectedReturnPercentage\"\n                type=\"number\"\n                name=\"expectedReturnPercentage\"\n                value={formData.expectedReturnPercentage}\n                onChange={handleChange}\n                step=\"0.1\"\n                placeholder=\"0\"\n                className=\"w-full px-4 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground placeholder:text-muted-foreground\"\n              />\n            </div>\n\n            {error && <div className=\"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg\">{error}</div>}\n\n            {/* Buttons */}\n            <div className=\"flex gap-4 pt-4\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"flex-1 bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground font-medium py-2.5 px-4 rounded-lg shadow-lg shadow-primary/20 transition-all\"\n              >\n                {loading ? \"Creating...\" : \"Create Business\"}\n              </button>\n              <Link\n                href=\"/owner/dashboard\"\n                className=\"flex-1 bg-secondary hover:bg-secondary/80 text-secondary-foreground font-medium py-2.5 px-4 rounded-lg transition-all text-center\"\n              >\n                Cancel\n              </Link>\n            </div>\n          </form>\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AANA;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAkC;IAClF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;QACvC,MAAM;QACN,aAAa;QACb,UAAU;QACV,UAAU;QACV,UAAU;QACV,WAAW;QACX,qBAAqB;QACrB,qBAAqB;QACrB,0BAA0B;IAC5B;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,CAAC,KAAK,EACJ,KAAK,QAAQ,CAAC,aACd,KAAK,QAAQ,CAAC,iBACd,KAAK,QAAQ,CAAC,eACd,KAAK,QAAQ,CAAC,eACV,OAAO,UAAU,CAAC,SAClB;YACR,CAAC;IACH;IAEA,MAAM,qBAAqB,CAAC;QAC1B,uEAAuE;QACvE,MAAM,WAAW;YACf;YACA;YACA;YACA;SACD;QAED,KAAK,MAAM,WAAW,SAAU;YAC9B,MAAM,QAAQ,MAAM,KAAK,CAAC;YAC1B,IAAI,OAAO,OAAO;gBAAE,KAAK,WAAW,KAAK,CAAC,EAAE;gBAAG,KAAK,WAAW,KAAK,CAAC,EAAE;YAAE;QAC3E;QAEA,OAAO;IACT;IAEA,MAAM,mBAAmB,CAAC;QACxB,OAAO,MAAM,QAAQ,CAAC,kBAAkB,MAAM,QAAQ,CAAC,sBAAsB,MAAM,QAAQ,CAAC;IAC9F;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,IAAI,aAAa;gBAAE,GAAG,QAAQ;YAAC;YAE/B,IAAI,iBAAiB,UAAU,iBAAiB,QAAQ;gBACtD,MAAM,SAAS,mBAAmB,SAAS,QAAQ;gBACnD,IAAI,QAAQ;oBACV,WAAW,QAAQ,GAAG,OAAO,GAAG;oBAChC,WAAW,SAAS,GAAG,OAAO,GAAG;gBACnC,OAAO,IAAI,iBAAiB,QAAQ;oBAClC,IAAI,iBAAiB,SAAS,QAAQ,GAAG;wBACvC,SAAS;oBACX,OAAO;wBACL,SAAS;oBACX;oBACA,WAAW;oBACX;gBACF;YACF;YAEA,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,KAAK,IAAI,CAAC,GAAG,EAAE;YAClD,OAAO;gBACL,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,SAAS,KAAK,KAAK,IAAI;YACzB;QACF,EAAE,OAAO,KAAK;YACZ,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6WAAC;QAAI,WAAU;;0BAEb,6WAAC;gBAAO,WAAU;0BAChB,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC,sSAAI;4BAAC,MAAK;4BAAmB,WAAU;sCAAiF;;;;;;sCAGzH,6WAAC;4BAAG,WAAU;sCAA0C;;;;;;;;;;;;;;;;;0BAK5D,6WAAC;gBAAK,WAAU;0BACd,cAAA,6WAAC;oBAAI,WAAU;8BACb,cAAA,6WAAC;wBAAK,UAAU;wBAAc,WAAU;;0CAEtC,6WAAC;;kDACC,6WAAC;wCAAM,SAAQ;wCAAO,WAAU;kDAAiD;;;;;;kDAGjF,6WAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,IAAI;wCACpB,UAAU;wCACV,aAAY;wCACZ,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAKZ,6WAAC;;kDACC,6WAAC;wCAAM,SAAQ;wCAAc,WAAU;kDAAiD;;;;;;kDAGxF,6WAAC;wCACC,IAAG;wCACH,MAAK;wCACL,OAAO,SAAS,WAAW;wCAC3B,UAAU;wCACV,aAAY;wCACZ,MAAM;wCACN,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAKZ,6WAAC;;kDACC,6WAAC;wCAAM,SAAQ;wCAAW,WAAU;kDAAiD;;;;;;kDAGrF,6WAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,aAAY;wCACZ,WAAU;;;;;;;;;;;;0CAKd,6WAAC;;kDACC,6WAAC;wCAAM,WAAU;kDAAiD;;;;;;kDAClE,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAW,CAAC,8CAA8C,EACxD,iBAAiB,SACb,uCACA,gEACJ;0DACH;;;;;;0DAGD,6WAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAW,CAAC,8CAA8C,EACxD,iBAAiB,SACb,uCACA,gEACJ;0DACH;;;;;;0DAGD,6WAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAW,CAAC,8CAA8C,EACxD,iBAAiB,gBACb,uCACA,gEACJ;0DACH;;;;;;;;;;;;oCAKF,iBAAiB,wBAChB,6WAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,aAAY;wCACZ,WAAU;wCACV,QAAQ;;;;;;oCAIX,iBAAiB,wBAChB,6WAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,aAAY;wCACZ,WAAU;wCACV,QAAQ;;;;;;oCAIX,iBAAiB,+BAChB,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAO,SAAS,QAAQ;gDACxB,UAAU;gDACV,MAAK;gDACL,aAAY;gDACZ,WAAU;gDACV,QAAQ;;;;;;0DAEV,6WAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAO,SAAS,SAAS;gDACzB,UAAU;gDACV,MAAK;gDACL,aAAY;gDACZ,WAAU;gDACV,QAAQ;;;;;;;;;;;;;;;;;;0CAOhB,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;;0DACC,6WAAC;gDAAM,SAAQ;gDAAsB,WAAU;0DAAiD;;;;;;0DAGhG,6WAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,OAAO,SAAS,mBAAmB;gDACnC,UAAU;gDACV,MAAK;gDACL,aAAY;gDACZ,WAAU;gDACV,QAAQ;;;;;;;;;;;;kDAGZ,6WAAC;;0DACC,6WAAC;gDAAM,SAAQ;gDAAsB,WAAU;0DAAiD;;;;;;0DAGhG,6WAAC;gDACC,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,OAAO,SAAS,mBAAmB;gDACnC,UAAU;gDACV,MAAK;gDACL,aAAY;gDACZ,WAAU;gDACV,QAAQ;;;;;;;;;;;;;;;;;;0CAMd,6WAAC;;kDACC,6WAAC;wCAAM,SAAQ;wCAA2B,WAAU;kDAAiD;;;;;;kDAGrG,6WAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,wBAAwB;wCACxC,UAAU;wCACV,MAAK;wCACL,aAAY;wCACZ,WAAU;;;;;;;;;;;;4BAIb,uBAAS,6WAAC;gCAAI,WAAU;0CAAwF;;;;;;0CAGjH,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;wCACC,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,UAAU,gBAAgB;;;;;;kDAE7B,6WAAC,sSAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}}]
}