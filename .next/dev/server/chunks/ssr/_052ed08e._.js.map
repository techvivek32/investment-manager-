{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/priyanshkakkad/Downloads/investment-platform-design/components/admin-sidebar.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\n\nexport function AdminSidebar() {\n  const pathname = usePathname()\n\n  const links = [\n    { href: '/admin/users', label: 'Users', icon: 'üë•' },\n    { href: '/admin/businesses', label: 'Businesses', icon: 'üè¢' },\n    { href: '/admin/visibility', label: 'Visibility', icon: 'üëÅÔ∏è' },\n    { href: '/admin/investments', label: 'Investments', icon: 'üí∞' },\n  ]\n\n  return (\n    <aside className=\"w-64 bg-card border-r border-border h-screen sticky top-0 flex flex-col\">\n      <div className=\"p-6 border-b border-border\">\n        <Link href=\"/admin/dashboard\" className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center\">\n            <svg className=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n            </svg>\n          </div>\n          <span className=\"font-bold text-foreground\">Admin Panel</span>\n        </Link>\n      </div>\n      \n      <nav className=\"flex-1 p-4 space-y-1\">\n        {links.map((link) => {\n          const isActive = pathname === link.href\n          return (\n            <Link\n              key={link.href}\n              href={link.href}\n              className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n                isActive\n                  ? 'bg-primary text-primary-foreground shadow-lg shadow-primary/20'\n                  : 'text-muted-foreground hover:bg-accent hover:text-foreground'\n              }`}\n            >\n              <span className=\"text-xl\">{link.icon}</span>\n              <span className=\"font-medium\">{link.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n\n      <div className=\"p-4 border-t border-border\">\n        <Link\n          href=\"/admin/dashboard\"\n          className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground hover:bg-accent hover:text-foreground transition-all\"\n        >\n          <span className=\"text-xl\">üè†</span>\n          <span className=\"font-medium\">Dashboard</span>\n        </Link>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS;IACd,MAAM,WAAW,IAAA,gRAAW;IAE5B,MAAM,QAAQ;QACZ;YAAE,MAAM;YAAgB,OAAO;YAAS,MAAM;QAAK;QACnD;YAAE,MAAM;YAAqB,OAAO;YAAc,MAAM;QAAK;QAC7D;YAAE,MAAM;YAAqB,OAAO;YAAc,MAAM;QAAM;QAC9D;YAAE,MAAM;YAAsB,OAAO;YAAe,MAAM;QAAK;KAChE;IAED,qBACE,6WAAC;QAAM,WAAU;;0BACf,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC,sSAAI;oBAAC,MAAK;oBAAmB,WAAU;;sCACtC,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAI,WAAU;gCAAuB,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CAC9E,cAAA,6WAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;sCAGzE,6WAAC;4BAAK,WAAU;sCAA4B;;;;;;;;;;;;;;;;;0BAIhD,6WAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,WAAW,aAAa,KAAK,IAAI;oBACvC,qBACE,6WAAC,sSAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC,4DAA4D,EACtE,WACI,mEACA,+DACJ;;0CAEF,6WAAC;gCAAK,WAAU;0CAAW,KAAK,IAAI;;;;;;0CACpC,6WAAC;gCAAK,WAAU;0CAAe,KAAK,KAAK;;;;;;;uBATpC,KAAK,IAAI;;;;;gBAYpB;;;;;;0BAGF,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC,sSAAI;oBACH,MAAK;oBACL,WAAU;;sCAEV,6WAAC;4BAAK,WAAU;sCAAU;;;;;;sCAC1B,6WAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;;;;;;;;;;;;AAKxC"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/priyanshkakkad/Downloads/investment-platform-design/app/admin/visibility/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\nimport { AdminSidebar } from \"@/components/admin-sidebar\"\n\ninterface VisibilityRecord {\n  _id: string\n  investorId: { _id: string; name: string; email: string }\n  businessId: { _id: string; name: string }\n  createdAt: string\n}\n\ninterface User {\n  _id: string\n  name: string\n  email: string\n}\n\ninterface Business {\n  _id: string\n  name: string\n}\n\nexport default function AdminVisibilityPage() {\n  const router = useRouter()\n  const [visibility, setVisibility] = useState<VisibilityRecord[]>([])\n  const [investors, setInvestors] = useState<User[]>([])\n  const [businesses, setBusinesses] = useState<Business[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedInvestor, setSelectedInvestor] = useState(\"\")\n  const [selectedBusiness, setSelectedBusiness] = useState(\"\")\n  const [assigning, setAssigning] = useState(false)\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  const fetchData = async () => {\n    try {\n      const [visRes, usersRes, bizRes] = await Promise.all([\n        fetch(\"/api/admin/visibility\"),\n        fetch(\"/api/admin/users\"),\n        fetch(\"/api/businesses\"),\n      ])\n\n      if (visRes.ok) {\n        const data = await visRes.json()\n        setVisibility(data.data || [])\n      }\n\n      if (usersRes.ok) {\n        const data = await usersRes.json()\n        const investorList = data.data.filter((u: User & { role: string }) => u.role === \"investor\")\n        setInvestors(investorList)\n      }\n\n      if (bizRes.ok) {\n        const data = await bizRes.json()\n        setBusinesses(data.data || [])\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch data:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAssign = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!selectedInvestor || !selectedBusiness) return\n\n    setAssigning(true)\n    try {\n      const response = await fetch(\"/api/admin/visibility\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          investorId: selectedInvestor,\n          businessId: selectedBusiness,\n        }),\n      })\n\n      if (response.ok) {\n        setSelectedInvestor(\"\")\n        setSelectedBusiness(\"\")\n        fetchData()\n      }\n    } catch (error) {\n      console.error(\"Failed to assign visibility:\", error)\n    } finally {\n      setAssigning(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex\">\n      <AdminSidebar />\n      \n      <div className=\"flex-1\">\n        {/* Header */}\n        <header className=\"bg-card border-b border-border sticky top-0 z-40 backdrop-blur-sm bg-card/95\">\n          <div className=\"px-6 py-4\">\n            <h1 className=\"text-2xl font-bold text-foreground\">Business Visibility Control</h1>\n          </div>\n        </header>\n\n        {/* Main Content */}\n        <main className=\"px-6 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Assign Form */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-card border border-border rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-foreground mb-4\">Assign Business to Investor</h2>\n              <form onSubmit={handleAssign} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Investor</label>\n                  <select\n                    value={selectedInvestor}\n                    onChange={(e) => setSelectedInvestor(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground\"\n                  >\n                    <option value=\"\">Select investor...</option>\n                    {investors.map((inv) => (\n                      <option key={inv._id} value={inv._id}>\n                        {inv.name} ({inv.email})\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Business</label>\n                  <select\n                    value={selectedBusiness}\n                    onChange={(e) => setSelectedBusiness(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-input rounded-lg focus:ring-2 focus:ring-ring bg-background text-foreground\"\n                  >\n                    <option value=\"\">Select business...</option>\n                    {businesses\n                      .filter((b: Business & { status?: string }) => b.status === \"approved\")\n                      .map((biz) => (\n                        <option key={biz._id} value={biz._id}>\n                          {biz.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={assigning || !selectedInvestor || !selectedBusiness}\n                  className=\"w-full bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground font-medium py-2 px-4 rounded-lg shadow-lg shadow-primary/20 transition-all\"\n                >\n                  {assigning ? \"Assigning...\" : \"Assign\"}\n                </button>\n              </form>\n            </div>\n          </div>\n\n          {/* Visibility List */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"bg-card border border-border rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-foreground mb-4\">Current Assignments</h2>\n              {loading ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n                </div>\n              ) : visibility.length === 0 ? (\n                <p className=\"text-muted-foreground\">No assignments yet</p>\n              ) : (\n                <div className=\"space-y-3\">\n                  {visibility.map((record) => (\n                    <div\n                      key={record._id}\n                      className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors\"\n                    >\n                      <div>\n                        <p className=\"font-medium text-foreground\">{record.businessId.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">{record.investorId.name}</p>\n                      </div>\n                      <span className=\"text-xs text-muted-foreground\">{new Date(record.createdAt).toLocaleDateString()}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}